import{u as v,R as i,a as w,j as e,r as q,b as t,d as _,h as y}from"./main.js";import{K as N}from"./transition.js";import{m as d}from"./dialog.js";function M({}){const{flash:c,errors:k}=v().props,[u,p]=i.useState(!0),[m,b]=i.useState(!1),h=()=>{p(!1),_.Inertia.get(y("connections"))},f=a=>a.toLowerCase().replaceAll(" ","-"),{data:s,setData:l,post:g,errors:r,setError:o}=w({slug:"",connection_name:"",mysqldb_host:"127.0.0.1",mysqldb_port:"3306",mysqldb_pass:"",mysqldb_user:"root",mysqldb_name:"",frequency:"everyMinute",enabled:!1,notifiable:!1});i.useEffect(()=>{l("slug",f(s.connection_name))},[s.connection_name]),i.useEffect(()=>{o("slug",r.slug),o("connection_name",r.connection_name),o("mysqldb_host",r.mysqldb_host),o("mysqldb_port",r.mysqldb_port),o("mysqldb_pass",r.mysqldb_pass),o("mysqldb_user",r.mysqldb_user),o("mysqldb_name",r.mysqldb_name),o("enabled",r.enabled),o("notifiable",r.notifiable)},[m]);async function n(a=!1){g(y("connection.store",{prevalidate:a}),{preserveScroll:!0,preserveState:!0,onBefore:()=>{b(!0)},onFinish:()=>{b(!1)}})}const x=a=>{a.preventDefault(),n(!1)};return e(N,{show:u,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",as:q.Fragment,children:t(d,{open:u,onClose:()=>p(!0),className:"relative z-50",children:[e("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-scroll pt-80",children:t(d.Panel,{className:"mx-auto max-w-xl bg-white rounded px-5",children:[t("div",{className:"py-5",children:[e(d.Title,{children:e("span",{className:"pt-2 font-bold text-lg",children:"Add Connection"})}),e(d.Description,{children:e("span",{children:"Creating new database connection and backup configuration"})})]}),t("div",{className:"form",children:[t("div",{className:"relative my-3",children:[e("input",{value:s.connection_name,onChange:a=>l("connection_name",a.target.value),onBlur:()=>n(!0),type:"text",id:"connection_name",placeholder:" ",className:`${r.connection_name&&"border-red-400 border"} peer block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-400 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500`}),e("label",{htmlFor:"connection_name",className:"tracking-wider peer-focus:base absolute left-2 top-0 z-10 -translate-y-2 transform bg-white px-1 text-xs text-gray-500 transition-all peer-placeholder-shown:translate-y-3 peer-placeholder-shown:text-sm peer-focus:-translate-y-2 peer-focus:text-xs peer-disabled:bg-transparent",children:"Connection Name"}),r.connection_name&&e("p",{className:"mt-1 text-sm text-red-500",children:r.connection_name})]}),t("div",{className:"mt-3 font-semibold text-sm tracking-wider",children:["Database configuration",t("div",{className:"py-5",children:[t("p",{className:`${c?.success?"text-green-600":"text-red-600"} text-xs`,children:[e("span",{className:"text-gray-600",children:"Status"})," : ",c?.success?"Connected":"Disconnected"]}),t("p",{className:"text-blue-600 text-xs",children:[e("span",{className:"text-gray-600",children:"Log"})," : ",c?.message]})]})]}),t("div",{className:"my-3",children:[t("div",{className:"relative my-3",children:[e("input",{value:s.mysqldb_host,onChange:a=>l("mysqldb_host",a.target.value),onBlur:()=>n(!0),type:"text",id:"mysqldb_host",placeholder:" ",className:`${r.mysqldb_host&&"border-red-400 border"} peer block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-400 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500`}),e("label",{htmlFor:"mysqldb_host",className:"tracking-wider peer-focus:base absolute left-2 top-0 z-10 -translate-y-2 transform bg-white px-1 text-xs text-gray-500 transition-all peer-placeholder-shown:translate-y-3 peer-placeholder-shown:text-sm peer-focus:-translate-y-2 peer-focus:text-xs peer-disabled:bg-transparent",children:"Mysql Hostname"}),r.mysqldb_host&&e("p",{className:"mt-1 text-sm text-red-500",children:r.mysqldb_host})]}),t("div",{className:"relative my-3",children:[e("input",{value:s.mysqldb_port,onChange:a=>l("mysqldb_port",a.target.value),onBlur:()=>n(!0),type:"text",id:"mysqldb_port",placeholder:" ",className:`${r.mysqldb_port&&"border-red-400 border"} peer block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-400 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500`}),e("label",{htmlFor:"mysqldb_port",className:"tracking-wider peer-focus:base absolute left-2 top-0 z-10 -translate-y-2 transform bg-white px-1 text-xs text-gray-500 transition-all peer-placeholder-shown:translate-y-3 peer-placeholder-shown:text-sm peer-focus:-translate-y-2 peer-focus:text-xs peer-disabled:bg-transparent",children:"Mysql Port"}),r.mysqldb_port&&e("p",{className:"mt-1 text-sm text-red-500",children:r.mysqldb_port})]}),t("div",{className:"relative my-3",children:[e("input",{value:s.mysqldb_user,onChange:a=>l("mysqldb_user",a.target.value),onBlur:()=>n(!0),type:"text",id:"mysqldb_user",placeholder:" ",className:`${r.mysqldb_user&&"border-red-400 border"} peer block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-400 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500`}),e("label",{htmlFor:"mysqldb_user",className:"tracking-wider peer-focus:base absolute left-2 top-0 z-10 -translate-y-2 transform bg-white px-1 text-xs text-gray-500 transition-all peer-placeholder-shown:translate-y-3 peer-placeholder-shown:text-sm peer-focus:-translate-y-2 peer-focus:text-xs peer-disabled:bg-transparent",children:"Mysql Username"}),r.mysqldb_user&&e("p",{className:"mt-1 text-sm text-red-500",children:r.mysqldb_user})]}),t("div",{className:"relative my-3",children:[e("input",{value:s.mysqldb_pass,onChange:a=>l("mysqldb_pass",a.target.value),onBlur:()=>n(!0),type:"text",id:"mysqldb_pass",placeholder:" ",className:`${r.mysqldb_pass&&"border-red-400 border"}  peer block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-400 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500`}),e("label",{htmlFor:"mysqldb_pass",className:"tracking-wider peer-focus:base absolute left-2 top-0 z-10 -translate-y-2 transform bg-white px-1 text-xs text-gray-500 transition-all peer-placeholder-shown:translate-y-3 peer-placeholder-shown:text-sm peer-focus:-translate-y-2 peer-focus:text-xs peer-disabled:bg-transparent",children:"Mysql Password"}),r.mysqldb_pass&&e("p",{className:"mt-1 text-sm text-red-500",children:r.mysqldb_pass})]}),t("div",{className:"relative my-3",children:[e("input",{onChange:a=>l("mysqldb_name",a.target.value),onBlur:()=>n(!0),type:"text",id:"mysqldb_name",placeholder:" ",className:`${r.mysqldb_name&&"border-red-400 border"}peer block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-400 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500`}),e("label",{htmlFor:"mysqldb_name",className:"tracking-wider peer-focus:base absolute left-2 top-0 z-10 -translate-y-2 transform bg-white px-1 text-xs text-gray-500 transition-all peer-placeholder-shown:translate-y-3 peer-placeholder-shown:text-sm peer-focus:-translate-y-2 peer-focus:text-xs peer-disabled:bg-transparent",children:"Mysql Database"}),r.mysqldb_name&&e("p",{className:"mt-1 text-sm text-red-500",children:r.mysqldb_name})]})]}),e("div",{className:"mt-3 font-semibold text-sm tracking-wider",children:"Auto Backup configuration"}),t("div",{className:"mt-3",children:[e("label",{htmlFor:"frequency",className:"mb-1 block text-sm font-medium text-gray-700",children:"Frequency"}),t("select",{value:s.frequency,onChange:a=>l("frequency",a.target.value),id:"frequency",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50",children:[e("option",{value:"everyMinute",children:"Every minute"}),e("option",{value:"everyTwoMinutes",children:"Every 2 minutes"}),e("option",{value:"everyThreeMinutes",children:"Every 3 minutes"}),e("option",{value:"everyFourMinutes",children:"Every 4 minutes"}),e("option",{value:"everyFiveMinutes",children:"Every 5 minutes"}),e("option",{value:"everyTenMinutes",children:"Every 10 minutes"}),e("option",{value:"everyFifteenMinutes",children:"Every 15 minutes"}),e("option",{value:"everyThirtyMinutes",children:"Every 30 minutes"}),e("option",{value:"everyTwoHours",children:"Every 2 hours"}),e("option",{value:"everyThreeHours",children:"Every 3 hours"}),e("option",{value:"everyFourHours",children:"Every 4 hours"}),e("option",{value:"everySixHours",children:"Every 6 hours"}),e("option",{value:"hourly",children:"Hourly"}),e("option",{value:"daily",children:"Daily"}),e("option",{value:"weekly",children:"Weekly"}),e("option",{value:"monthly",children:"Monthly"}),e("option",{value:"quarterly",children:"Quarterly"}),e("option",{value:"yearly",children:"Yearly"})]})]}),t("div",{className:"mt-3",children:[e("label",{htmlFor:"enabled",className:"mb-1 block text-sm font-medium text-gray-700",children:"Backup Enabled"}),t("label",{htmlFor:"enabled",className:"relative inline-flex cursor-pointer items-center",children:[e("input",{value:s.enabled.toString(),onChange:a=>{l("enabled",Boolean(a.target.checked))},type:"checkbox",id:"enabled",className:"peer sr-only"}),e("div",{className:"h-6 w-11 rounded-full bg-gray-100 after:absolute after:top-0.5 after:left-0.5 after:h-5 after:w-5 after:rounded-full after:bg-white after:shadow after:transition-all after:content-[''] hover:bg-gray-200 peer-checked:bg-primary-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-4 peer-focus:ring-primary-200 peer-disabled:cursor-not-allowed peer-disabled:bg-gray-100 peer-disabled:after:bg-gray-50"})]})]}),t("div",{className:"mt-3",children:[e("label",{htmlFor:"notifiable",className:"mb-1 block text-sm font-medium text-gray-700",children:"Notification via Email"}),t("label",{htmlFor:"notifiable",className:"relative inline-flex cursor-pointer items-center",children:[e("input",{value:s.notifiable.toString(),onChange:a=>{l("notifiable",Boolean(a.target.checked))},type:"checkbox",id:"notifiable",className:"peer sr-only"}),e("div",{className:"h-6 w-11 rounded-full bg-gray-100 after:absolute after:top-0.5 after:left-0.5 after:h-5 after:w-5 after:rounded-full after:bg-white after:shadow after:transition-all after:content-[''] hover:bg-gray-200 peer-checked:bg-primary-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-4 peer-focus:ring-primary-200 peer-disabled:cursor-not-allowed peer-disabled:bg-gray-100 peer-disabled:after:bg-gray-50"})]})]})]}),t("div",{className:"py-5 flex gap-x-2",children:[e("button",{disabled:m,className:"tracking-wider rounded-lg border border-primary-500 bg-primary-500 px-5 py-2.5 text-center text-sm font-medium text-white shadow-sm transition-all hover:border-primary-700 hover:bg-primary-700 focus:ring focus:ring-primary-200 disabled:cursor-not-allowed disabled:border-primary-300 disabled:bg-primary-300",onClick:x,children:"Save"}),e("button",{disabled:m,className:"tracking-wider rounded-lg border border-gray-500 bg-gray-500 px-5 py-2.5 text-center text-sm font-medium text-white shadow-sm transition-all hover:border-gray-700 hover:bg-gray-700 focus:ring focus:ring-gray-200 disabled:cursor-not-allowed disabled:border-gray-300 disabled:bg-gray-300",onClick:()=>{h()},children:"Cancel"})]})]})})]})})}export{M as default};
